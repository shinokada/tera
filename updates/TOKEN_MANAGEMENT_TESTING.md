# Token Management - Testing Checklist\n\n## Pre-Implementation Testing\n\n- [x] Syntax validation (bash -n) for all modified scripts\n- [x] No breaking changes to existing functionality\n- [x] Backward compatibility with .env files\n\n---\n\n## Core Functionality Testing\n\n### Token Storage Functions\n\n- [ ] `init_token_directory()` - Creates ~/.config/tera/tokens/ with 700 permissions\n- [ ] `save_github_token()` - Saves token file with 600 permissions\n- [ ] `load_github_token()` - Returns token from file\n- [ ] `has_github_token()` - Returns true/false correctly\n- [ ] `delete_github_token()` - Removes token file\n- [ ] `get_masked_token()` - Returns proper format (ghp_...xyz)\n- [ ] `validate_github_token()` - Tests with GitHub API\n\n### Menu Navigation\n\n- [ ] Main Menu → \"6) Gist\" works\n- [ ] Gist Menu displays all options including \"1) Token Management\"\n- [ ] Token Management Menu displays all 4 options\n- [ ] Navigation back works (0 to go back)\n- [ ] All menus use fzf selection properly\n\n---\n\n## Setup Token Workflow\n\n### Happy Path (Valid Token)\n\n- [ ] Can access \"1) Setup/Change Token\"\n- [ ] Prompts for token with hidden input\n- [ ] Validates token format (not too short, has prefix)\n- [ ] Makes API call to GitHub\n- [ ] Shows GitHub username on success\n- [ ] Saves to ~/.config/tera/tokens/github_token\n- [ ] Returns to Token Management menu\n- [ ] Token can be used in Gist operations\n\n### Format Validation\n\n- [ ] Rejects empty token\n- [ ] Rejects too-short token (< 20 chars)\n- [ ] Accepts token starting with \"ghp_\"\n- [ ] Offers retry on validation failure\n\n### Replacement Flow\n\n- [ ] If token exists, asks \"Replace existing token?\"\n- [ ] Allows user to cancel replacement\n- [ ] If user accepts, replaces token\n- [ ] New token is validated before saving\n\n### Error Handling\n\n- [ ] Network error shows helpful message\n- [ ] Invalid token shows specific error\n- [ ] Offers to retry on failure\n- [ ] Graceful fallback to menu on cancel\n\n---\n\n## View Token Workflow\n\n- [ ] Can access \"2) View Current Token\"\n- [ ] Shows masked token (ghp_...xyz)\n- [ ] Shows GitHub username\n- [ ] Validates token before showing info\n- [ ] Shows \"✓ Token is currently valid\" on success\n- [ ] Shows warning on validation failure\n- [ ] Returns to menu on Enter\n\n---\n\n## Validate Token Workflow\n\n### Valid Token\n\n- [ ] Can access \"3) Validate Token\"\n- [ ] Shows \"✓ Token is VALID!\"\n- [ ] Displays GitHub username\n- [ ] Shows confirmation message\n- [ ] Returns to menu\n\n### Invalid Token\n\n- [ ] Shows \"✗ Token is INVALID or EXPIRED!\"\n- [ ] Lists possible causes\n- [ ] Suggests updating token\n- [ ] Returns to menu\n\n---\n\n## Delete Token Workflow\n\n### Confirmation Flow\n\n- [ ] Can access \"4) Delete Token\"\n- [ ] Shows warning with masked token\n- [ ] Prompts for \"yes\" confirmation\n- [ ] Requires exact \"yes\" (not just any input)\n- [ ] Cancels on any other input\n\n### Deletion\n\n- [ ] Shows \"✓ Token has been deleted successfully!\"\n- [ ] Removes token file\n- [ ] Unsets GITHUB_TOKEN environment variable\n- [ ] Future gist operations show \"token not found\"\n- [ ] Can set up new token anytime\n\n---\n\n## Integration with Gist Operations\n\n### Create Gist (with token)\n\n- [ ] Token is loaded from secure storage\n- [ ] Token is used in API request\n- [ ] Gist creation succeeds\n- [ ] Gist metadata is saved\n\n### Create Gist (without token)\n\n- [ ] Shows helpful error message\n- [ ] Directs user to Token Management\n- [ ] Doesn't create gist\n- [ ] Returns to menu\n\n### Other Gist Operations\n\n- [ ] My Gists works with token\n- [ ] Recover Gist works with token\n- [ ] Update Gist works with token\n- [ ] Delete Gist works with token\n- [ ] All show error without token\n\n---\n\n## Backward Compatibility\n\n### .env File Loading\n\n- [ ] GITHUB_TOKEN from .env is loaded\n- [ ] Takes priority over secure storage\n- [ ] Works with existing setups\n- [ ] No breaking changes\n\n### Migration Path\n\n- [ ] User with .env can set up new token via menu\n- [ ] New token goes to secure storage\n- [ ] Both paths work simultaneously\n- [ ] User can delete .env if they prefer secure storage\n\n---\n\n## Documentation Testing\n\n- [ ] GIST_SETUP.md is updated and clear\n- [ ] TOKEN_MANAGEMENT.md is comprehensive\n- [ ] TOKEN_MANAGEMENT_VISUAL_GUIDE.md is accurate\n- [ ] README.md references token system\n- [ ] All links work\n- [ ] Examples are accurate\n\n---\n\n## User Experience Testing\n\n### First-Time User\n\n- [ ] Can complete setup without reading docs\n- [ ] Clear prompts guide through process\n- [ ] Menu structure is intuitive\n- [ ] Feedback is immediate\n- [ ] Can recover from mistakes\n\n### Returning User\n\n- [ ] Token is remembered between sessions\n- [ ] No need to set up again\n- [ ] Can easily change token\n- [ ] Token status is visible\n\n### Error Recovery\n\n- [ ] Can retry on validation failure\n- [ ] Can cancel and start over\n- [ ] Can delete and redo\n- [ ] Clear error messages\n- [ ] Helpful troubleshooting info\n\n---\n\n## Security Testing\n\n### File Permissions\n\n- [ ] Token file is created with 600 permissions\n- [ ] Token directory has 700 permissions\n- [ ] Only owner can read/write token\n- [ ] Permissions persist after restart\n\n### Input Security\n\n- [ ] Token input is hidden (no echo)\n- [ ] Masked display shows only safe portion\n- [ ] Token not logged in error messages\n- [ ] Token not shown in process list\n\n### API Validation\n\n- [ ] Actually calls GitHub API\n- [ ] Doesn't save invalid tokens\n- [ ] Validates before saving\n- [ ] Shows user feedback\n\n---\n\n## Edge Cases\n\n- [ ] Multiple rapid setup attempts\n- [ ] Rapid cancel/retry cycles\n- [ ] Very long token (copy extra characters)\n- [ ] Token with whitespace\n- [ ] Expired token (revoked on GitHub)\n- [ ] Network timeout during validation\n- [ ] Permission issues on token directory\n- [ ] Token file corrupted (invalid JSON)\n- [ ] Concurrent TERA instances\n\n---\n\n## Performance Testing\n\n- [ ] Token loading is instant\n- [ ] Menu navigation is responsive\n- [ ] API validation completes in reasonable time (< 5s)\n- [ ] No slowdown of other TERA operations\n- [ ] Gist operations still work at same speed\n\n---\n\n## Installation Method Testing\n\nTest with all installation methods:\n\n- [ ] **Source:** `./tera` from directory\n- [ ] **Brew:** `brew install tera` (if available)\n- [ ] **.deb:** `apt install tera` (if available)\n- [ ] **/awesome:** `awesome install tera` (if available)\n\nFor each:\n- [ ] Can set up token\n- [ ] Token persists\n- [ ] Gist operations work\n- [ ] Multiple sessions work\n\n---\n\n## Platform Testing\n\n- [ ] macOS (BSD date)\n- [ ] Linux (GNU date)\n- [ ] Different shells (bash, zsh, sh)\n- [ ] Different terminal emulators\n\n---\n\n## Final Checklist\n\n- [ ] All syntax valid\n- [ ] All functions work independently\n- [ ] All workflows complete successfully\n- [ ] Gist operations still work\n- [ ] No breaking changes\n- [ ] Documentation is complete\n- [ ] User experience is smooth\n- [ ] Security is maintained\n- [ ] Error messages are helpful\n- [ ] Menu is intuitive\n- [ ] Works on all platforms\n- [ ] Works with all installations\n- [ ] Ready for production\n\n---\n\n## Post-Implementation\n\n- [ ] Commit changes to git\n- [ ] Update CHANGELOG\n- [ ] Create release notes\n- [ ] Tag version\n- [ ] Update package managers\n- [ ] Announce to users\n- [ ] Monitor for issues\n- [ ] Update wiki/docs as needed\n\n---\n\n## Notes\n\n```\nKey Points:\n\n1. Token storage at ~/.config/tera/tokens/github_token\n2. File permissions must be 600 (user only)\n3. Token loaded at TERA startup\n4. .env takes priority if both exist\n5. All validations happen before saving\n6. Masked display: ghp_VaVnzkTqr...ItDAAEo\n7. No encryption (relies on OS permissions)\n8. Works with all installation methods\n9. Backward compatible with .env files\n10. Complete documentation provided\n```\n